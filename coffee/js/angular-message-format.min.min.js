(function(cb,bP,aU){var br=cb.angular["$interpolateMinErr"];var bN=cb.angular.noop,bB=cb.angular.isFunction,b7=cb.angular.toJson;function bh(a){if(a==null){return""}switch(typeof a){case"string":return a;case"number":return""+a;default:return b7(a)}}function aY(a,c){var d=a.split(/\n/g);for(var b=0;b<d.length;b++){var e=d[b];if(c>=e.length){c-=e.length}else{return{line:b+1,column:c+1}}}}var bY=Object.create(null);function a3(a){var d=bY[a];if(d!=null){return d}function c(e){return a}c["$$watchDelegate"]=function b(i,h,e){var g=i["$watch"](bN,function f(){if(bB(h)){h.call(null,a,a,i)}g()},e);return g};bY[a]=c;c.exp=a;c.expressions=[];return c}function b1(b,c){if(c===0){return b}function f(g){return(g==void 0)?g:g-c}function e(g){return f(b(g))}var a;e["$$watchDelegate"]=function d(h,g,j){a=h["$watch"](b,function i(k,l){if(bB(g)){g.call(null,f(k),f(l),h)}},j);return a};return e}function bn(b,a){var d=this;this.expressionFn=b;this.choices=a;if(a.other===void 0){throw br("reqother","“other” is a required option.")}this.parsedFn=function(e){return d.getResult(e)};this.parsedFn["$$watchDelegate"]=function c(e,g,f){return d.watchDelegate(e,g,f)};this.parsedFn.exp=b.exp;this.parsedFn.expressions=b.expressions}bn.prototype.getMessageFn=function bO(a){return this.choices[this.categorizeValue(a)]};bn.prototype.getResult=function b0(a){return this.getMessageFn(this.expressionFn(a))(a)};bn.prototype.watchDelegate=function a1(c,a,d){var b=new a7(this,c,a,d);return function(){b.cancelWatch()}};function a7(c,b,a,f){var d=this;this.scope=b;this.msgSelector=c;this.listener=a;this.objectEquality=f;this.lastMessage=void 0;this.messageFnWatcher=bN;var e=function(g,h){return d.expressionFnListener(g,h)};this.expressionFnWatcher=b["$watch"](c.expressionFn,e,f)}a7.prototype.expressionFnListener=function bz(b,c){var e=this;this.messageFnWatcher();var d=function(f,g){return e.messageFnListener(f,g)};var a=this.msgSelector.getMessageFn(b);this.messageFnWatcher=this.scope["$watch"](a,d,this.objectEquality)};a7.prototype.messageFnListener=function bT(b,a){if(bB(this.listener)){this.listener.call(null,b,b===a?b:this.lastMessage,this.scope)}this.lastMessage=b};a7.prototype.cancelWatch=function bF(){this.expressionFnWatcher();this.messageFnWatcher()};function a6(b,a){bn.call(this,b,a)}function bZ(){}bZ.prototype=bn.prototype;a6.prototype=new bZ();a6.prototype.categorizeValue=function b5(a){return(this.choices[a]!==void 0)?a:"other"};function aP(b,a,c,d){bn.call(this,b,a);this.offset=c;this.pluralCat=d}function aX(){}aX.prototype=bn.prototype;aP.prototype=new aX();aP.prototype.categorizeValue=function bv(a){if(isNaN(a)){return"other"}else{if(this.choices[a]!==void 0){return a}else{var b=this.pluralCat(a-this.offset);return(this.choices[b]!==void 0)?b:"other"}}};function a2(b,a){this.trustedContext=b;this.allOrNothing=a;this.textParts=[];this.expressionFns=[];this.expressionIndices=[];this.partialText="";this.concatParts=null}a2.prototype.flushPartialText=function bI(){if(this.partialText){if(this.concatParts==null){this.textParts.push(this.partialText)}else{this.textParts.push(this.concatParts.join(""));this.concatParts=null}this.partialText=""}};a2.prototype.addText=function bG(a){if(a.length){if(!this.partialText){this.partialText=a}else{if(this.concatParts){this.concatParts.push(a)}else{this.concatParts=[this.partialText,a]}}}};a2.prototype.addExpressionFn=function bc(a){this.flushPartialText();this.expressionIndices.push(this.textParts.length);this.expressionFns.push(a);this.textParts.push("")};a2.prototype.getExpressionValues=function cd(a){var c=new Array(this.expressionFns.length);for(var b=0;b<this.expressionFns.length;b++){c[b]=this.expressionFns[b](a)}return c};a2.prototype.getResult=function b0(b){for(var a=0;a<this.expressionIndices.length;a++){var c=b[a];if(this.allOrNothing&&c===void 0){return}this.textParts[this.expressionIndices[a]]=c}return this.textParts.join("")};a2.prototype.toParsedFn=function a9(f,a){var e=this;this.flushPartialText();if(f&&this.expressionFns.length===0){return void 0}if(this.textParts.length===0){return a3("")}if(this.trustedContext&&this.textParts.length>1){br.throwNoconcat(a)}if(this.expressionFns.length===0){if(this.textParts.length!=1){this.errorInParseLogic()}return a3(this.textParts[0])}var b=function(g){return e.getResult(e.getExpressionValues(g))};b["$$watchDelegate"]=function c(h,g,i){return e.watchDelegate(h,g,i)};b.exp=a;b.expressions=new Array(this.expressionFns.length);for(var d=0;d<this.expressionFns.length;d++){b.expressions[d]=this.expressionFns[d]["exp"]}return b};a2.prototype.watchDelegate=function a1(b,a,d){var c=new ca(this,b,a,d);return function(){c.cancelWatch()}};function ca(b,c,a,e){this.interpolationParts=b;this.scope=c;this.previousResult=(void 0);this.listener=a;var d=this;this.expressionFnsWatcher=c["$watchGroup"](b.expressionFns,function(g,f){d.watchListener(g,f)})}ca.prototype.watchListener=function aO(a,b){var c=this.interpolationParts.getResult(a);if(bB(this.listener)){this.listener.call(null,c,a===b?c:this.previousResult,this.scope)}this.previousResult=c};ca.prototype.cancelWatch=function bF(){this.expressionFnsWatcher()};function b3(b,a){a.expressionFn=b.expressionFn;a.expressionMinusOffsetFn=b.expressionMinusOffsetFn;a.pluralOffset=b.pluralOffset;a.choices=b.choices;a.choiceKey=b.choiceKey;a.interpolationParts=b.interpolationParts;a.ruleChoiceKeyword=b.ruleChoiceKeyword;a.msgStartIndex=b.msgStartIndex;a.expressionStartIndex=b.expressionStartIndex}function bd(a){b3(a,this)}function bX(g,h,b,c,f,e,d,a){this.text=g;this.index=h||0;this.$parse=b;this.pluralCat=c;this.stringifier=f;this.mustHaveExpression=!!e;this.trustedContext=d;this.allOrNothing=!!a;this.expressionFn=null;this.expressionMinusOffsetFn=null;this.pluralOffset=null;this.choices=null;this.choiceKey=null;this.interpolationParts=null;this.msgStartIndex=null;this.nestedStateStack=[];this.parsedFn=null;this.rule=null;this.ruleStack=null;this.ruleChoiceKeyword=null;this.interpNestLevel=null;this.expressionStartIndex=null;this.stringStartIndex=null;this.stringQuote=null;this.stringInterestsRe=null;this.angularOperatorStack=null;this.textPart=null}var a8=new bd(new bX("",0,null,null,null,false,null,false));bX.prototype.pushState=function bL(){this.nestedStateStack.push(new bd(this));b3(a8,this)};bX.prototype.popState=function b9(){if(this.nestedStateStack.length===0){this.errorInParseLogic()}var a=this.nestedStateStack.pop();b3(a,this)};bX.prototype.matchRe=function aQ(a,b){a.lastIndex=this.index;var c=a.exec(this.text);if(c!=null&&(b===true||(c.index==this.index))){this.index=a.lastIndex;return c}return null};bX.prototype.searchRe=function bQ(a){return this.matchRe(a,true)};bX.prototype.consumeRe=function aN(a){return !!this.matchRe(a)};bX.prototype.run=function bx(a){this.ruleStack=[a];do{this.rule=this.ruleStack.pop();while(this.rule){this.rule()}this.assertRuleOrNull(this.rule)}while(this.ruleStack.length>0)};bX.prototype.errorInParseLogic=function cc(){throw br("logicbug","The messageformat parser has encountered an internal error.  Please file a github issue against the AngularJS project and provide this message text that triggers the bug.  Text: “{0}”",this.text)};bX.prototype.assertRuleOrNull=function bS(a){if(a===void 0){this.errorInParseLogic()}};var bg=/\s*(\w+)\s*/g;bX.prototype.errorExpecting=function bA(){var b=this.matchRe(bg),c;if(b==null){c=aY(this.text,this.index);throw br("reqarg","Expected one of “plural” or “select” at line {0}, column {1} of text “{2}”",c.line,c.column,this.text)}var a=b[1];if(a=="select"||a=="plural"){c=aY(this.text,this.index);throw br("reqcomma","Expected a comma after the keyword “{0}” at line {1}, column {2} of text “{3}”",a,c.line,c.column,this.text)}else{c=aY(this.text,this.index);throw br("unknarg","Unsupported keyword “{0}” at line {0}, column {1}. Only “plural” and “select” are currently supported.  Text: “{3}”",a,c.line,c.column,this.text)}};var bK=/['"]/g;bX.prototype.ruleString=function b8(){var a=this.matchRe(bK);if(a==null){var b=aY(this.text,this.index);throw br("wantstring","Expected the beginning of a string at line {0}, column {1} in text “{2}”",b.line,b.column,this.text)}this.startStringAtMatch(a)};bX.prototype.startStringAtMatch=function bo(a){this.stringStartIndex=a.index;this.stringQuote=a[0];this.stringInterestsRe=this.stringQuote=="'"?bM:aR;this.rule=this.ruleInsideString};var bM=/\\(?:\\|'|u[0-9A-Fa-f]{4}|x[0-9A-Fa-f]{2}|[0-7]{3}|\r\n|\n|[\s\S])|'/g;var aR=/\\(?:\\|"|u[0-9A-Fa-f]{4}|x[0-9A-Fa-f]{2}|[0-7]{3}|\r\n|\n|[\s\S])|"/g;bX.prototype.ruleInsideString=function bE(){var b=this.searchRe(this.stringInterestsRe);if(b==null){var c=aY(this.text,this.stringStartIndex);throw br("untermstr","The string beginning at line {0}, column {1} is unterminated in text “{2}”",c.line,c.column,this.text)}var a=b[0];if(b==this.stringQuote){this.rule=null}};var bp=/\s*(plural|select)\s*,\s*/g;bX.prototype.rulePluralOrSelect=function bf(){var a=this.searchRe(bp);if(a==null){this.errorExpecting()}var b=a[1];switch(b){case"plural":this.rule=this.rulePluralStyle;break;case"select":this.rule=this.ruleSelectStyle;break;default:this.errorInParseLogic()}};bX.prototype.rulePluralStyle=function aZ(){this.choices=Object.create(null);this.ruleChoiceKeyword=this.rulePluralValueOrKeyword;this.rule=this.rulePluralOffset};bX.prototype.ruleSelectStyle=function aS(){this.choices=Object.create(null);this.ruleChoiceKeyword=this.ruleSelectKeyword;this.rule=this.ruleSelectKeyword};var aV=/[0]|(?:[1-9][0-9]*)/g;var bD=new RegExp("\\s*offset\\s*:\\s*("+aV.source+")","g");bX.prototype.rulePluralOffset=function be(){var a=this.matchRe(bD);this.pluralOffset=(a==null)?0:parseInt(a[1],10);this.expressionMinusOffsetFn=b1(this.expressionFn,this.pluralOffset);this.rule=this.rulePluralValueOrKeyword};bX.prototype.assertChoiceKeyIsNew=function b2(a,b){if(this.choices[a]!==void 0){var c=aY(this.text,b);throw br("dupvalue","The choice “{0}” is specified more than once. Duplicate key is at line {1}, column {2} in text “{3}”",a,c.line,c.column,this.text)}};var a4=/\s*(\w+)/g;bX.prototype.ruleSelectKeyword=function aW(){var a=this.matchRe(a4);if(a==null){this.parsedFn=new a6(this.expressionFn,this.choices).parsedFn;this.rule=null;return}this.choiceKey=a[1];this.assertChoiceKeyIsNew(this.choiceKey,a.index);this.rule=this.ruleMessageText};var bi=new RegExp("\\s*(?:(?:=("+aV.source+"))|(\\w+))","g");bX.prototype.rulePluralValueOrKeyword=function bW(){var a=this.matchRe(bi);if(a==null){this.parsedFn=new aP(this.expressionFn,this.choices,this.pluralOffset,this.pluralCat).parsedFn;this.rule=null;return}if(a[1]!=null){this.choiceKey=parseInt(a[1],10)}else{this.choiceKey=a[2]}this.assertChoiceKeyIsNew(this.choiceKey,a.index);this.rule=this.ruleMessageText};var by=/\s*{/g;var bH=/}/g;bX.prototype.ruleMessageText=function bJ(){if(!this.consumeRe(by)){var a=aY(this.text,this.index);throw br("reqopenbrace","The plural choice “{0}” must be followed by a message in braces at line {1}, column {2} in text “{3}”",this.choiceKey,a.line,a.column,this.text)}this.msgStartIndex=this.index;this.interpolationParts=new a2(this.trustedContext,this.allOrNothing);this.rule=this.ruleInInterpolationOrMessageText};var bw=/\\.|{{|}/g;var bt=/\\.|{{|#|}/g;var bj=/\\.|{{/g;bX.prototype.advanceInInterpolationOrMessageText=function bC(){var d=this.index,c,a;if(this.ruleChoiceKeyword==null){c=this.searchRe(bj);if(c==null){this.textPart=this.text.substring(d);this.index=this.text.length;return null}}else{c=this.searchRe(this.ruleChoiceKeyword==this.rulePluralValueOrKeyword?bt:bw);if(c==null){var e=aY(this.text,this.msgStartIndex);throw br("reqendbrace","The plural/select choice “{0}” message starting at line {1}, column {2} does not have an ending closing brace. Text “{3}”",this.choiceKey,e.line,e.column,this.text)}}var b=c[0];this.textPart=this.text.substring(d,c.index);return b};bX.prototype.ruleInInterpolationOrMessageText=function a5(){var b=this.index;var a=this.advanceInInterpolationOrMessageText();if(a==null){this.index=this.text.length;this.interpolationParts.addText(this.text.substring(b));this.rule=null;return}if(a[0]=="\\"){this.interpolationParts.addText(this.textPart+a[1]);return}this.interpolationParts.addText(this.textPart);if(a=="{{"){this.pushState();this.ruleStack.push(this.ruleEndMustacheInInterpolationOrMessage);this.rule=this.ruleEnteredMustache}else{if(a=="}"){this.choices[this.choiceKey]=this.interpolationParts.toParsedFn(false,this.text);this.rule=this.ruleChoiceKeyword}else{if(a=="#"){this.interpolationParts.addExpressionFn(this.expressionMinusOffsetFn)}else{this.errorInParseLogic()}}}};bX.prototype.ruleInterpolate=function bs(){this.interpolationParts=new a2(this.trustedContext,this.allOrNothing);this.rule=this.ruleInInterpolation};bX.prototype.ruleInInterpolation=function b6(){var c=this.index;var b=this.searchRe(bj);if(b==null){this.index=this.text.length;this.interpolationParts.addText(this.text.substring(c));this.parsedFn=this.interpolationParts.toParsedFn(this.mustHaveExpression,this.text);this.rule=null;return}var a=b[0];if(a[0]=="\\"){this.interpolationParts.addText(this.text.substring(c,b.index)+a[1]);return}this.interpolationParts.addText(this.text.substring(c,b.index));this.pushState();this.ruleStack.push(this.ruleInterpolationEndMustache);this.rule=this.ruleEnteredMustache};bX.prototype.ruleInterpolationEndMustache=function bU(){var a=this.parsedFn;this.popState();this.interpolationParts.addExpressionFn(a);this.rule=this.ruleInInterpolation};bX.prototype.ruleEnteredMustache=function ba(){this.parsedFn=null;this.ruleStack.push(this.ruleEndMustache);this.rule=this.ruleAngularExpression};bX.prototype.ruleEndMustacheInInterpolationOrMessage=function bu(){var a=this.parsedFn;this.popState();this.interpolationParts.addExpressionFn(a);this.rule=this.ruleInInterpolationOrMessageText};var bq=/\s*}}/g;bX.prototype.ruleEndMustache=function bR(){var a=this.matchRe(bq);if(a==null){var b=aY(this.text,this.index);throw br("reqendinterp","Expecting end of interpolation symbol, “{0}”, at line {1}, column {2} in text “{3}”","}}",b.line,b.column,this.text)}if(this.parsedFn==null){this.parsedFn=this.$parse(this.expressionFn,this.stringifier);this.parsedFn.exp=this.expressionFn.exp;this.parsedFn.expressions=this.expressionFn.expressions}this.rule=null};bX.prototype.ruleAngularExpression=function a0(){this.angularOperatorStack=[];this.expressionStartIndex=this.index;this.rule=this.ruleInAngularExpression};function bb(a){switch(a){case"{":return"}";case"[":return"]";case"(":return")";default:return null}}function bk(a){switch(a){case"}":return"{";case"]":return"[";case")":return"(";default:return null}}var bl=/[[\]{}()'",]/g;bX.prototype.ruleInAngularExpression=function bm(){var a=this.index;var b=this.searchRe(bl);var f;if(b==null){if(this.angularOperatorStack.length===0){this.index=this.text.length;this.expressionFn=this.$parse(this.text.substring(this.expressionStartIndex,this.index));this.expressionFn.exp=this.text.substring(this.expressionStartIndex,this.index);this.expressionFn.expressions=this.expressionFn.expressions;this.rule=null;return}var d=this.angularOperatorStack[0];throw br("badexpr","Unexpected end of Angular expression.  Expecting operator “{0}” at the end of the text “{1}”",this.getEndOperator(d),this.text)}var e=b[0];if(e=="'"||e=='"'){this.ruleStack.push(this.ruleInAngularExpression);this.startStringAtMatch(b);return}if(e==","){if(this.trustedContext){f=aY(this.text,this.index);throw br("unsafe","Use of select/plural MessageFormat syntax is currently disallowed in a secure context ({0}).  At line {1}, column {2} of text “{3}”",this.trustedContext,f.line,f.column,this.text)}if(this.angularOperatorStack.length===0){this.expressionFn=this.$parse(this.text.substring(this.expressionStartIndex,b.index));this.expressionFn.exp=this.text.substring(this.expressionStartIndex,b.index);this.expressionFn.expressions=this.expressionFn.expressions;this.rule=null;this.rule=this.rulePluralOrSelect}return}if(bb(e)!=null){this.angularOperatorStack.unshift(e);return}var c=bk(e);if(c==null){this.errorInParseLogic()}if(this.angularOperatorStack.length>0){if(c==this.angularOperatorStack[0]){this.angularOperatorStack.shift();return}f=aY(this.text,this.index);throw br("badexpr","Unexpected operator “{0}” at line {1}, column {2} in text. Was expecting “{3}”. Text: “{4}”",e,f.line,f.column,bb(this.angularOperatorStack[0]),this.text)}this.index=b.index;this.expressionFn=this.$parse(this.text.substring(this.expressionStartIndex,this.index));this.expressionFn.exp=this.text.substring(this.expressionStartIndex,this.index);this.expressionFn.expressions=this.expressionFn.expressions;this.rule=null};var bV=["$parse","$locale","$sce","$exceptionHandler",function aT(a,c,f,b){function e(i,h,g){return function j(k){try{k=i?f.getTrusted(i,k):f.valueOf(k);return h&&(k===void 0)?k:bh(k)}catch(l){b(br.interr(g,l))}}}function d(h,k,j,i){var l=e(j,i,h);var g=new bX(h,0,a,c.pluralCat,l,k,j,i);g.run(g.ruleInterpolate);return g.parsedFn}return{interpolate:d}}];var ce=["$$messageFormat","$delegate",function ce(b,a){if(a.startSymbol()!="{{"||a.endSymbol()!="}}"){throw br("nochgmustache","angular-message-format.js currently does not allow you to use custom start and end symbols for interpolation.")}var c=b.interpolate;c.startSymbol=a.startSymbol;c.endSymbol=a.endSymbol;return c}];var b4=cb.angular.module("ngMessageFormat",["ng"]);b4.factory("$$messageFormat",bV);b4.config(["$provide",function(a){a.decorator("$interpolate",ce)}])})(window,window.angular);